{"version":3,"sources":["../src/index.js"],"names":[],"mappings":";;AAAA;;AACA;;;;AACA;;;;AACA;;;;AAEA,IAAM,QAAQ,0CAAd;;AAEA,MAAM,SAAN,CAAgB,YAAM;AACrB,QAAO,MAAM,QAAN,EAAP;AACA,CAFD;;;AAKA,QAAQ,KAAR,CAAc,UAAd,CAAyB,IAAzB;AACA,mBAAS,kBAAT,CAA4B,QAAQ,KAApC;;AAEA,QAAQ,KAAR,CAAc,EAAd,CAAiB,UAAjB,EAA6B,4BAAc,KAAd,CAA7B;AACA,QAAQ,KAAR,CAAc,EAAd,CAAiB,UAAjB,EAA6B,cAA7B;AACA,QAAQ,EAAR,CAAW,QAAX,EAAqB,mBAAK,KAAL,CAArB;;;AAGA,MAAM,QAAN,CAAe;AACd,OAAM,MADQ;AAEd,OAAM;AACL,QAAM;AADD;AAFQ,CAAf;;AAOA,SAAS,MAAT,OAAkD;AAAA,KAA/B,IAA+B,QAA/B,IAA+B;AAAA,KAAzB,KAAyB,QAAzB,KAAyB;AAAA,KAAlB,QAAkB,QAAlB,QAAkB;AAAA,KAAR,IAAQ,QAAR,IAAQ;;AACjD,oBAAS,SAAT,CAAmB,QAAQ,MAA3B,EAAmC,CAAnC;AACA,oBAAS,QAAT,CAAkB,QAAQ,MAA1B,EAAkC,CAAlC;;AAEA,KAAI,eAAJ;AACA,KAAI,SAAS,UAAb,EAAyB;AACxB,MAAM,UAAW,UAAU,SAAS,MAApB,GAA8B,MAA9B,GAAuC,EAAvD;AACA,WAAS,SAAS,IAAT,GAAgB,KAAhB,GAAwB,OAAjC;AACA,EAHD,MAGO;AACN,WAAS,KAAK,IAAd;AACA;AACD,SAAQ,MAAR,CAAe,KAAf,CAAqB,MAArB;AACA;;AAED,SAAS,cAAT,CAAyB,CAAzB,EAA4B,GAA5B,EAAiC;AAChC,KAAI,IAAI,IAAJ,IAAY,IAAI,IAAJ,KAAa,GAA7B,EAAkC;AACjC,UAAQ,IAAR,CAAa,QAAQ,GAArB,EAA0B,QAA1B;AACA;AACD","file":"index.js","sourcesContent":["import { createStore } from 'redux'\nimport readline from 'readline'\nimport reducer from './reducer.js'\nimport { questionInput, exit } from './actions.js'\n\nconst store = createStore(reducer)\n\nstore.subscribe(() => {\n\trender(store.getState())\n})\n\n// set up console\nprocess.stdin.setRawMode(true)\nreadline.emitKeypressEvents(process.stdin)\n\nprocess.stdin.on('keypress', questionInput(store))\nprocess.stdin.on('keypress', listenForCtrlC)\nprocess.on('SIGINT', exit(store))\n\n// start game\nstore.dispatch({\n\ttype: 'INFO',\n\tinfo: {\n\t\ttext: 'Velkommen. Før vi starter, skal vi ta en test for å se hvor rask du er. Trykk på en knapp for å fortsette.'\n\t}\n})\n\nfunction render ({ mode, input, question, info }) {\n\treadline.clearLine(process.stdout, 0)\n\treadline.cursorTo(process.stdout, 0)\n\t// console.log(store.getState())\n\tlet output\n\tif (mode === 'question') {\n\t\tconst correct = (input === question.answer) ? ' ✓\\n' : ''\n\t\toutput = question.text + input + correct\n\t} else {\n\t\toutput = info.text\n\t}\n\tprocess.stdout.write(output)\n}\n\nfunction listenForCtrlC (_, key) {\n\tif (key.ctrl && key.name === 'c') {\n\t\tprocess.kill(process.pid, 'SIGINT')\n\t}\n}"]}